<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TsumTsum 列表</title>
  <style>
    .tsum-entry {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    .tsum-entry img {
      width: 80px;
      height: 80px;
      margin-right: 10px;
      object-fit: contain;
      border: 1px solid #ccc;
    }
    .tsum-entry .placeholder {
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
      border: 1px solid #ccc;
      background-color: #f0f0f0;
      font-size: 10px;
      text-align: center;
      padding: 2px;
    }
  </style>
</head>
<body>
  <div id="container"></div>

  <script src="tsum.js"></script>
  <script src="images.js"></script>

  <script>
    const container = document.getElementById("container");

    // 若 images 是陣列，轉換成物件
    const imageMap = typeof images.forEach === "function"
      ? Object.fromEntries(images.map(item => [Object.keys(item)[0], Object.values(item)[0]]))
      : images;

    // 根據 id 排序
    tsumData.sort((a, b) => a.id - b.id);

    tsumData.forEach(tsum => {
      const entry = document.createElement("div");
      entry.className = "tsum-entry";

      let imageElement;

      if (imageMap[tsum.image]) {
        const img = document.createElement("img");
        img.src = "data:image/png;base64," + imageMap[tsum.image];
        imageElement = img;
      } else {
        const placeholder = document.createElement("div");
        placeholder.className = "placeholder";
        placeholder.textContent = tsum.image;
        imageElement = placeholder;
      }

      const name = document.createElement("span");
      name.textContent = tsum.name;

      entry.appendChild(imageElement);
      entry.appendChild(name);
      container.appendChild(entry);
    });
  </script>
</body>
</html>
